const MockRequests=function e(){let t={},n,r,s="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;function o(e){let n=p(e);if(!n)return null;let{pathname:r}=c(e),s=t[e]||t[r];return s}function l({response:e=null,dynamicResponseModFn:t=null,delay:n=0,usePathnameForAllQueries:r=!1,responseProperties:s={}}={}){let o={response:null,dynamicResponseModFn:null,delay:0,usePathnameForAllQueries:!1,responseProperties:s};return o.response=i(e),t&&"function"==typeof t&&(o.dynamicResponseModFn=t),n&&(o.delay=n),o.usePathnameForAllQueries=Boolean(r),o}function i(e=null){return JSON.parse(JSON.stringify(e))}function u(e){return Object.keys(e).reduce((t,n)=>(t[n]=l({response:e[n]}),t),{})}function a(e){return"object"==typeof e?JSON.stringify(e):`${e}`}function c(e){let t=e.indexOf("?"),n=t>=0,r=e.indexOf("#"),s=r>=0,o=new URL(e.startsWith("http")?e:"http://localhost"+e).pathname,l=n?s?e.substring(t+1,r):e.substring(t+1):"",i=s?e.substring(r+1):"",u=0===l.length?{}:l.split("&").reduce((e,t)=>{let n=t.split("="),r=decodeURIComponent(n[0]),s=decodeURIComponent(n[1]);return e[r]=s,e},{});return i.length>0&&(u.hash=decodeURIComponent(i)),{pathname:o,queryParamMap:u,hasQueryParams:n||s}}function p(e){let n=t.hasOwnProperty(e),{pathname:r,hasQueryParams:s}=c(e),o=t.hasOwnProperty(r);return n||s&&o&&t[r].usePathnameForAllQueries}function d(e){let t;try{t=JSON.parse(e)}catch(n){t=e}return t}async function f(e,t){let n=o(e);if(n.dynamicResponseModFn&&"function"==typeof n.dynamicResponseModFn){let{queryParamMap:r}=c(e),s=i(await n.dynamicResponseModFn(d(t),n.response,r));n.response=s}return n.response}function h(e,t=()=>{}){return e?(...n)=>{setTimeout(()=>{t(...n)},e)}:t}return!function e(){let t=!!s.XMLHttpRequest,r="undefined"!=typeof XMLHttpRequest;(t||r)&&(n=XMLHttpRequest,XMLHttpRequest=function(){let e=new n;async function t(t){let n=o(e.url),r=await f(e.url,t),s={readyState:4,response:r,responseText:a(r),responseUrl:e.url,status:200,statusText:"OK",timeout:0,...n.responseProperties,headers:{status:"200",...n.responseProperties.headers}};Object.entries(s).forEach(([t,n])=>{Object.defineProperties(e,{[t]:{configurable:!0,enumerable:!0,get(){return this[`_${t}`]},set(e){return this[`_${t}`]=e,this}},[`_${t}`]:{configurable:!0,enumerable:!1,writable:!0,value:s[t]}})}),e.getResponseHeader=(function e(t){let n=this.headers[t];return null!=n?n:null}).bind(e),e.getAllResponseHeaders=(function e(){return Object.entries(this.headers).map(([e,t])=>`${e}: ${t}`).join("\r\n")}).bind(e)}return e.originalOpen=e.open,e.open=function(t,n,...r){e.url=n,e.originalOpen(t,n,...r)},e.originalSend=e.send,e.send=async function(n){if(p(e.url)){let r=o(e.url);await t(n);let l=[{eventType:"readystatechange"},{eventType:"load",properties:{lengthComputable:!0,loaded:e.responseText.length,total:e.responseText.length}},{eventType:"loadend",properties:{lengthComputable:!0,loaded:e.responseText.length,total:e.responseText.length}},];l.forEach(({eventType:t,properties:n})=>{let o=()=>{let r=e[`on${t}`]||(()=>{}),o=function e(t,{element:n=s,bubbles:r=!1,cancelable:o=!1,composed:l=!1,properties:i={}}={}){let u;try{u=new Event(t,{bubbles:r,cancelable:o,composed:l})}catch(a){try{(u=document.createEvent("Event")).initEvent(t,r,o)}catch(c){u={type:t,bubbles:r,cancelable:o,composed:l,target:n,currentTarget:n,isTrusted:!1,defaultPrevented:!1,eventPhase:0,path:[],cancelBubble:!1,returnValue:!0,srcElement:n,timeStamp:1234,toString:()=>"[object Event]",initEvent(e,t=!1,n=!1){this.type=e,this.bubbles=t,this.cancelable=n},preventDefault(){this.defaultPrevented=!0},stopPropagation(){this.bubbles=!1,this.cancelBubble=!0},stopImmediatePropagation(){this.stopPropagation()}}}}return Object.entries(i).forEach(([e,t])=>{Object.defineProperty(u,e,{configurable:!1,writable:!1,enumerable:!0,value:t})}),()=>n&&n.dispatchEvent&&n.dispatchEvent(u)}(t,{element:e,properties:n});r(n),o()},l=h(r.delay,o);l()})}else e.originalSend(n)},e})}(),!function e(){let t=!!s.fetch,n="undefined"!=typeof fetch;(t||n)&&(r=s.fetch.bind(s),s.fetch=function(e,t){let n="object"==typeof e,s=n?e.url:e;return p(s)?(async()=>{let r=o(s),l=n?d(await e.text()):t&&t.hasOwnProperty("body")&&t.body?d(t.body):void 0,i=await f(s,l),u={clone(){return this},json:()=>Promise.resolve(i),text:()=>Promise.resolve(a(i)),status:200,statusText:"",ok:!0,redirected:!1,type:"basic",url:s,...r.responseProperties,headers:new Headers({status:"200",...r.responseProperties?.headers})};return await new Promise(e=>{let t=h(r.delay,e);t(u)})})():r(e,t)})}(),{configure:function e(n={},r=!0){let s=u(n);t=r?s:{...t,...s}},configureDynamicResponses:function e(n={},r=!0){let s=Object.keys(n).reduce((e,t)=>{let r=l(n[t]);if(r.usePathnameForAllQueries){let{pathname:s}=c(t);e[s]=r}else e[t]=r;return e},{});t=r?s:{...t,...s}},setMockUrlResponse:function e(n,r=null){t[n]=l({response:r})},setDynamicMockUrlResponse:function e(n,r){let s=l(r);if(s.usePathnameForAllQueries){let{pathname:o}=c(n);t[o]=s}else t[n]=s},getResponse:function e(t){let n=o(t);if(n)return n.response},deleteMockUrlResponse:function e(n){let r=o(n);if(r.usePathnameForAllQueries){let{pathname:s}=c(n);return delete t[s]}return delete t[n]},clearAllMocks:function e(){t={}},mapStaticConfigToDynamic:u,OriginalXHR:n,originalFetch:r}}();