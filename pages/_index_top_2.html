<script>
    module.exports = function(){
        const { getLastedPost, setCategoriesTagsInPosts } = require('./lib/data.js')
		const post_data = getLastedPost(4) 
        let result = setCategoriesTagsInPosts(post_data)

        result = result.map((p)=>{
            //<a href="/category/300-main/" class="cat">300 Main</a>
            p['categories'] = p.categories.map(c=>`<a href="${c.link}" class="cat">${c.name}</a>`).join("")
            return p
        })
        result = result.map((p)=>{
            //<time class="entry-date published dateCreated" datetime="2022-05-27T15:00:00+00:00">May 27, 2022</time>
            p['date_long_form'] = new Date(p.date).toLocaleDateString('en-us', {year:"numeric", month:"short", day:"numeric"})
            return p
        })
        
		return result
    }
</script>

        <article
            class="tipi-xs-12 clearfix with-fi ani-base tipi-xs-typo split-1 split-design-1 loop-0 preview-thumbnail preview-25 elements-design-1 post-10477 post type-post status-publish format-standard has-post-thumbnail hentry category-300-main category-art-photography category-downtown-events category-exchange-district-events tag-apartment-building-in-downtown-winnipeg tag-apartment-living tag-bike-in-winnioeg tag-bike-tour-in-winnipeg tag-downtown-apartments tag-downtown-winnipeg tag-nuit-blanche-winnipeg tag-winnipeg-apartments">
            <div class="preview-mini-wrap clearfix">
                <div class="mask"><a href="${data[0].link}" class="mask-img">
                    <img style="width:60px; height:60px"
                            src="${data[0].yoast_head_json.og_image[0].url}"
                            class="attachment-thumbnail size-thumbnail wp-post-image"
                            alt="" loading="lazy"
                            sizes="(max-width: 100px) 100vw, 100px" /></a></div>
                <div class="meta">
                    <div class="title-wrap">
                        <h3 class="title"><a href="${data[0].link}"> ${data[0].title.rendered}</a></h3>
                    </div>
                </div>
            </div>
        </article>

        <article
            class="tipi-xs-12 clearfix with-fi ani-base tipi-xs-typo split-1 split-design-1 loop-1 preview-thumbnail preview-25 elements-design-1 post-10429 post type-post status-publish format-standard has-post-thumbnail hentry category-apartment-hacks tag-apartment-building-in-downtown-winnipeg tag-apartment-living tag-apartment-living-winnipeg tag-downtown-living tag-gardening tag-small-garden tag-winnipeg-apartments">
            <div class="preview-mini-wrap clearfix">
                <div class="mask"><a href="${data[1].link}"
                        class="mask-img"><img style="width:60px; height:60px"
                        src="${data[1].yoast_head_json.og_image[0].url}"
                            class="attachment-thumbnail size-thumbnail wp-post-image"
                            alt="" loading="lazy"
                            sizes="(max-width: 100px) 100vw, 100px" /></a>
                </div>
                <div class="meta">
                    <div class="title-wrap">
                        <h3 class="title">
                            <a href="${data[1].link}"> ${data[1].title.rendered}</a>
                        </h3>
                    </div>
                </div>
            </div>
        </article>

        <article
            class="tipi-xs-12 clearfix with-fi ani-base tipi-xs-typo split-1 split-design-1 loop-2 preview-thumbnail preview-25 elements-design-1 post-10346 post type-post status-publish format-standard has-post-thumbnail hentry category-food-restaurants tag-apartment-living tag-lifestyle tag-smoothies">
            <div class="preview-mini-wrap clearfix">
                <div class="mask"><a href="${data[2].link}"
                    class="mask-img"><img style="width:60px; height:60px"
                    src="${data[2].yoast_head_json.og_image[0].url}"
                        class="attachment-thumbnail size-thumbnail wp-post-image"
                        alt="" loading="lazy"
                        sizes="(max-width: 100px) 100vw, 100px" /></a>
                </div>
                <div class="meta">
                    <div class="title-wrap">
                        <h3 class="title">
                            <a href="${data[2].link}"> ${data[2].title.rendered}</a>
                        </h3>
                    </div>
                </div>
            </div>
        </article>

        <article
            class="tipi-xs-12 clearfix with-fi ani-base tipi-xs-typo split-1 split-design-1 loop-3 preview-thumbnail preview-25 elements-design-1 post-10314 post type-post status-publish format-standard has-post-thumbnail hentry category-food-restaurants category-lifestyle tag-downtown-winnipeg tag-downtown-winnipeg-restaurants tag-winnipeg-restaurants">
            <div class="preview-mini-wrap clearfix">
                <div class="mask"><a href="${data[3].link}"
                        class="mask-img"><img style="width:60px; height:60px"
                        src="${data[3].yoast_head_json.og_image[0].url}"
                            class="attachment-thumbnail size-thumbnail wp-post-image"
                            alt="" loading="lazy"
                            sizes="(max-width: 100px) 100vw, 100px" /></a>
                </div>
                <div class="meta">
                    <div class="title-wrap">
                        <h3 class="title">
                            <a href="${data[3].link}"> ${data[3].title.rendered}</a>
                        </h3>
                    </div>
                </div>
            </div>
        </article>
