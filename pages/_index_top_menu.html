<script>
    module.exports = function () {
        const article_template = require('./pages/_index_api_get_menu.js')
        const {getPostByCategoryId, loadCategories, loadMenu} = require('./lib/data.js')
        function get_latest_post_by_category({id}){
            const data = getPostByCategoryId(id,3)
            //const data = getJSONSync(`./out/data/category.${category_id}.json`)
            return data.map(p=> {
                return {
                    image_url:p.yoast_head_json.og_image[0].url,
                    url:p.link,
                    title:p.title.rendered
                }
            })
        }

        const categories = loadCategories()
        function get_category_info({id,name,link}){
            if(undefined === id){
                //<a href="https://livingat300main.ca/category/lifestyle/" data-ppp="3" data-tid="29" data-term="category">Lifestyle</a>
                return `<a href="${link}" data-term="category">${name}</a>`
            }else{
                const cate =  categories.filter(c=>c.id === id)[0]
                //<a href="https://livingat300main.ca/category/lifestyle/" data-ppp="3" data-tid="29" data-term="category">Lifestyle</a>
                return `<a href="${cate.link}" data-ppp="3" data-tid="${cate.id}" data-term="category">${cate.name}</a>`
            }

        }

        const article_template_container = (menus) => `

        <li id="menu-item-101" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home dropper drop-it mm-art mm-wrap-2 mm-wrap menu-item-101">
            ${get_category_info(menus[0])}
        </li>
        <li id="menu-item-395" class="menu-item menu-item-type-taxonomy menu-item-object-category dropper drop-it mm-art mm-wrap-11 mm-wrap mm-color mm-sb-left menu-item-395">
            ${get_category_info(menus[1])}
            <div class="menu mm-11 tipi-row" data-mm="11">
                <div class="menu-wrap menu-wrap-more-10 tipi-flex">
                    <div id="block-wrap-395" class="block-wrap block-wrap-61 block-css-395 block-wrap-classic elements-design-1 block-skin-0 filter-wrap-2 block-col-self tipi-box tipi-row ppl-m-3 ppl-s-3 clearfix" data-id="395">
                        <div class="tipi-row-inner-style clearfix">
                            <div class="tipi-row-inner-box contents">
                                <div class="block-title-wrap module-block-title clearfix  block-title-1 with-load-more">
                                    <div class="block-title-area clearfix">
                                        <div class="block-title font-1">Lifestyle</div>
                                    </div>
                                    <div class="filters tipi-flex font-2">
                                        <div class="load-more-wrap load-more-size-2 load-more-wrap-2">
                                            <span data-id="395" class="tipi-arrow tipi-arrow-s tipi-arrow-l block-loader block-more block-more-1 no-more" data-dir="1">
                                                <i class="tipi-i-angle-left" aria-hidden="true"></i>
                                            </span>
                                            <span data-id="395" class="tipi-arrow tipi-arrow-s tipi-arrow-r block-loader block-more block-more-2" data-dir="2">
                                                <i class="tipi-i-angle-right" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="block block-61 tipi-flex preview-review-bot meta-overlay-0">
                                    ${article_template(get_latest_post_by_category(menus[1]))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li id="menu-item-393" class="menu-item menu-item-type-taxonomy menu-item-object-category dropper drop-it mm-art mm-wrap-11 mm-wrap mm-color mm-sb-left menu-item-393">
            ${get_category_info(menus[2])}
            <div class="menu mm-11 tipi-row" data-mm="11">
                <div class="menu-wrap menu-wrap-more-10 tipi-flex">
                    <div id="block-wrap-393" class="block-wrap block-wrap-61 block-css-393 block-wrap-classic elements-design-1 block-skin-0 filter-wrap-2 block-col-self tipi-box tipi-row ppl-m-3 ppl-s-3 clearfix" data-id="393">
                        <div class="tipi-row-inner-style clearfix">
                            <div class="tipi-row-inner-box contents">
                                <div class="block-title-wrap module-block-title clearfix  block-title-1 with-load-more">
                                    <div class="block-title-area clearfix">
                                        <div class="block-title font-1">Culture</div>
                                    </div>
                                    <div class="filters tipi-flex font-2">
                                        <div class="load-more-wrap load-more-size-2 load-more-wrap-2">
                                            <span data-id="393" class="tipi-arrow tipi-arrow-s tipi-arrow-l block-loader block-more block-more-1 no-more" data-dir="1">
                                                <i class="tipi-i-angle-left" aria-hidden="true"></i>
                                            </span>
                                            <span data-id="393" class="tipi-arrow tipi-arrow-s tipi-arrow-r block-loader block-more block-more-2" data-dir="2">
                                                <i class="tipi-i-angle-right" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="block block-61 tipi-flex preview-review-bot meta-overlay-0">
                                    ${article_template(get_latest_post_by_category(menus[2]))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li id="menu-item-262" class="menu-item menu-item-type-taxonomy menu-item-object-category dropper drop-it mm-art mm-wrap-11 mm-wrap mm-color mm-sb-left menu-item-262">
            ${get_category_info(menus[3])}
            <div class="menu mm-11 tipi-row" data-mm="11">
                <div class="menu-wrap menu-wrap-more-10 tipi-flex">
                    <div id="block-wrap-262" class="block-wrap block-wrap-61 block-css-262 block-wrap-classic elements-design-1 block-skin-0 filter-wrap-2 block-col-self tipi-box tipi-row ppl-m-3 ppl-s-3 clearfix" data-id="262">
                        <div class="tipi-row-inner-style clearfix">
                            <div class="tipi-row-inner-box contents">
                                <div class="block-title-wrap module-block-title clearfix  block-title-1 with-load-more">
                                    <div class="block-title-area clearfix">
                                        <div class="block-title font-1">Art &amp;Photography</div>
                                    </div>
                                    <div class="filters tipi-flex font-2">
                                        <div class="load-more-wrap load-more-size-2 load-more-wrap-2">
                                            <span data-id="262" class="tipi-arrow tipi-arrow-s tipi-arrow-l block-loader block-more block-more-1 no-more" data-dir="1">
                                                <i class="tipi-i-angle-left" aria-hidden="true"></i>
                                            </span>
                                            <span data-id="262" class="tipi-arrow tipi-arrow-s tipi-arrow-r block-loader block-more block-more-2" data-dir="2">
                                                <i class="tipi-i-angle-right" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="block block-61 tipi-flex preview-review-bot meta-overlay-0">
                                    ${article_template(get_latest_post_by_category(menus[3]))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li id="menu-item-394" class="menu-item menu-item-type-taxonomy menu-item-object-category dropper drop-it mm-art mm-wrap-11 mm-wrap mm-color mm-sb-left menu-item-394">
            ${get_category_info(menus[4])}
            <div class="menu mm-11 tipi-row" data-mm="11">
                <div class="menu-wrap menu-wrap-more-10 tipi-flex">
                    <div id="block-wrap-394" class="block-wrap block-wrap-61 block-css-394 block-wrap-classic elements-design-1 block-skin-0 filter-wrap-2 block-col-self tipi-box tipi-row ppl-m-3 ppl-s-3 clearfix" data-id="394">
                        <div class="tipi-row-inner-style clearfix">
                            <div class="tipi-row-inner-box contents">
                                <div class="block-title-wrap module-block-title clearfix  block-title-1 with-load-more">
                                    <div class="block-title-area clearfix">
                                        <div class="block-title font-1">Environment</div>
                                    </div>
                                    <div class="filters tipi-flex font-2">
                                        <div class="load-more-wrap load-more-size-2 load-more-wrap-2">
                                            <span data-id="394" class="tipi-arrow tipi-arrow-s tipi-arrow-l block-loader block-more block-more-1 no-more" data-dir="1">
                                                <i class="tipi-i-angle-left" aria-hidden="true"></i>
                                            </span>
                                            <span data-id="394" class="tipi-arrow tipi-arrow-s tipi-arrow-r block-loader block-more block-more-2" data-dir="2">
                                                <i class="tipi-i-angle-right" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="block block-61 tipi-flex preview-review-bot meta-overlay-0">
                                    ${article_template(get_latest_post_by_category(menus[4]))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li id="menu-item-396" class="menu-item menu-item-type-taxonomy menu-item-object-category dropper drop-it mm-art mm-wrap-11 mm-wrap mm-color mm-sb-left menu-item-396">
            ${get_category_info(menus[5])}
            <div class="menu mm-11 tipi-row" data-mm="11">
                <div class="menu-wrap menu-wrap-more-10 tipi-flex">
                    <div id="block-wrap-396" class="block-wrap block-wrap-61 block-css-396 block-wrap-classic elements-design-1 block-skin-0 filter-wrap-2 block-col-self tipi-box tipi-row ppl-m-3 ppl-s-3 clearfix" data-id="396">
                        <div class="tipi-row-inner-style clearfix">
                            <div class="tipi-row-inner-box contents">
                                <div class="block-title-wrap module-block-title clearfix  block-title-1 with-load-more">
                                    <div class="block-title-area clearfix">
                                        <div class="block-title font-1">Shopping</div>
                                    </div>
                                    <div class="filters tipi-flex font-2">
                                        <div class="load-more-wrap load-more-size-2 load-more-wrap-2">
                                            <span data-id="396" class="tipi-arrow tipi-arrow-s tipi-arrow-l block-loader block-more block-more-1 no-more" data-dir="1">
                                                <i class="tipi-i-angle-left" aria-hidden="true"></i>
                                            </span>
                                            <span data-id="396" class="tipi-arrow tipi-arrow-s tipi-arrow-r block-loader block-more block-more-2" data-dir="2">
                                                <i class="tipi-i-angle-right" aria-hidden="true"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="block block-61 tipi-flex preview-review-bot meta-overlay-0">
                                    ${article_template(get_latest_post_by_category(menus[5]))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li id="menu-item-1332" class="menu-item menu-item-type-post_type menu-item-object-page dropper drop-it mm-art mm-wrap-2 mm-wrap menu-item-1332">
            ${get_category_info(menus[6])}
        </li>

        `

        const result =  article_template_container(loadMenu())

        return {html: result}
    }
</script>

${data.html}